<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
 <HEAD>
 <LINK REL="STYLESHEET" TYPE="text/css" HREF="plsqldoc.css">
 <TITLE>Package body api_twitter</TITLE>
 <META name="object" content="PACKAGE BODY">
 <META name="name" content="api_twitter">
 <META name="description" content="">
</HEAD>
<BODY>
<TABLE WIDTH="100%"><TR>
<TD><P ALIGN="LEFT"><STRONG><SMALL></SMALL></STRONG></TD>
<TD><P ALIGN="RIGHT"><STRONG><SMALL><A HREF="index.html">index</A></SMALL></STRONG></TD>
</TR></TABLE>
<TABLE CLASS="MAIN_TABLE"><TR><TD CLASS="DESC_TEXT">
<P CLASS="MAIN_TITLE">Package body api_twitter</P>

<BR>
</TD></TR></TABLE>
<HR>
<A NAME="Program units"></A>
<TABLE CLASS="SUB_TABLE"><TR><TD CLASS="SUB_TITLE">
Program units
</TD></TR></TABLE>
<TABLE CLASS="SUB_TABLE">
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#check_error_http_status">check_error_http_status</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Check if Response HTTP Status is successful (2XX Status codes) Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#encode_key_secret_base64">encode_key_secret_base64</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Encode consumer key and secret for twitter authentication request Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_twitter_bearer_token">get_twitter_bearer_token</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Get Twitter bearer (auth token) for future authentication Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#invalidate_bearer_token">invalidate_bearer_token</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Invalidate Twitter bearer (auth token) + remove from system table Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#reset_twitter_bearer_token">reset_twitter_bearer_token</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Resets twitter bearer token to a new one (invalidate + get new) Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 26.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#set_http_headers">set_http_headers</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Set HTTP Headers for Twitter REST Calls Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_api_test_url_result">get_api_test_url_result</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Function to test the different API calls from Twitter Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_twitter_rate_limit_status">get_twitter_rate_limit_status</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Get Twitter limits of api calls, max value and current used Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#check_twitter_api_limits">check_twitter_api_limits</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Check if Twitter API Calls are possible, or if limit is reached Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_twitter_followers">get_twitter_followers</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Get all Twitter Follower IDs(Following People) per twitter user id Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_twitter_friends">get_twitter_friends</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Get all Twitter friend IDs(People you follow) per twitter user id Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#ins_twitter_friends">ins_twitter_friends</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Get all Twitter friend IDs(People you follow) per id_usr from usr table
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_twitter_id">get_twitter_id</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Find the Twitter User ID for an twitter name Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_twitter_name">get_twitter_name</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Find the Twitter User name for an twitter ID Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_twitter_profile_pic_url">get_twitter_profile_pic_url</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Find the Twitter Profile Pic URL for an twitter ID Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#get_search_results">get_search_results</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>
Purpose:&nbsp; Get all Tweets as search result with specified search string Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:
</TD></TR>
</TABLE>
<BR>
<A NAME="Constants"></A>
<TABLE CLASS="SUB_TABLE"><TR><TD CLASS="SUB_TITLE">
Constants
</TD></TR></TABLE>
<TABLE CLASS="SUB_TABLE">
<TR><TD VALIGN="TOP" CLASS="TYPE_ITEM">
<A HREF="#priv_package">priv_package</A>&nbsp;&nbsp;
</TD><TD CLASS="DESC_TEXT" WIDTH=95%>

</TD></TR>
</TABLE>
<BR>
<HR>
<A NAME="priv_package"></A>
<P CLASS="TYPE_TITLE">
priv_package
</P>
<PRE CLASS="DECL_TEXT">
<A HREF="api_usr.body.html#priv_package">priv_package</A> CONSTANT VARCHAR2(30) := 'api_twitter';
</PRE>

<HR>
<A NAME="check_error_http_status"></A>
<P CLASS="TYPE_TITLE">
check_error_http_status
</P>
<PRE CLASS="DECL_TEXT">
PROCEDURE <A HREF="api_twitter.html#check_error_http_status">check_error_http_status</A>

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Check if Response HTTP Status is successful (2XX Status codes) Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="encode_key_secret_base64"></A>
<P CLASS="TYPE_TITLE">
encode_key_secret_base64
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION encode_key_secret_base64(i_consumer_key    IN system.twitter_consumer_key%TYPE,
                                  i_consumer_secret IN system.twitter_consumer_secret%TYPE)
  RETURN VARCHAR2

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Encode consumer key and secret for twitter authentication request Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_twitter_bearer_token"></A>
<P CLASS="TYPE_TITLE">
get_twitter_bearer_token
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_twitter.html#get_twitter_bearer_token">get_twitter_bearer_token</A>(i_twitter_consumer_key    IN system.twitter_consumer_key%TYPE := NULL,
                                  i_twitter_consumer_secret IN system.twitter_consumer_secret%TYPE := NULL)
  RETURN system.twitter_api_bearer%TYPE

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Get Twitter bearer (auth token) for future authentication Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="invalidate_bearer_token"></A>
<P CLASS="TYPE_TITLE">
invalidate_bearer_token
</P>
<PRE CLASS="DECL_TEXT">
PROCEDURE <A HREF="api_twitter.html#invalidate_bearer_token">invalidate_bearer_token</A>

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Invalidate Twitter bearer (auth token) + remove from system table Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="reset_twitter_bearer_token"></A>
<P CLASS="TYPE_TITLE">
reset_twitter_bearer_token
</P>
<PRE CLASS="DECL_TEXT">
PROCEDURE <A HREF="api_twitter.html#reset_twitter_bearer_token">reset_twitter_bearer_token</A>

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Resets twitter bearer token to a new one (invalidate + get new) Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 26.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="set_http_headers"></A>
<P CLASS="TYPE_TITLE">
set_http_headers
</P>
<PRE CLASS="DECL_TEXT">
PROCEDURE <A HREF="api_twitter.html#set_http_headers">set_http_headers</A>(i_bearer_token IN system.twitter_api_bearer%TYPE)

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Set HTTP Headers for Twitter REST Calls Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_api_test_url_result"></A>
<P CLASS="TYPE_TITLE">
get_api_test_url_result
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_twitter.html#get_api_test_url_result">get_api_test_url_result</A>(i_url IN VARCHAR2) RETURN CLOB

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Function to test the different API calls from Twitter Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_twitter_rate_limit_status"></A>
<P CLASS="TYPE_TITLE">
get_twitter_rate_limit_status
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_twitter.html#get_twitter_rate_limit_status">get_twitter_rate_limit_status</A>(o_users_lookup_limit      OUT NUMBER,
                                       o_users_lookup_remaining  OUT NUMBER,
                                       o_friends_ids_limit       OUT NUMBER,
                                       o_friends_ids_remaining   OUT NUMBER,
                                       o_followers_ids_limit     OUT NUMBER,
                                       o_followers_ids_remaining OUT NUMBER,
                                       o_search_tweets_limit     OUT NUMBER,
                                       o_search_tweets_remaining OUT NUMBER)
  RETURN CLOB

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Get Twitter limits of api calls, max value and current used Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 15.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="check_twitter_api_limits"></A>
<P CLASS="TYPE_TITLE">
check_twitter_api_limits
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_twitter.html#check_twitter_api_limits">check_twitter_api_limits</A>(i_api_type IN VARCHAR2) RETURN BOOLEAN

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Check if Twitter API Calls are possible, or if limit is reached Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_twitter_followers"></A>
<P CLASS="TYPE_TITLE">
get_twitter_followers
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_twitter.html#get_twitter_followers">get_twitter_followers</A>(i_twitter_id IN usr.twitter_id%TYPE)
  RETURN CLOB

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Get all Twitter Follower IDs(Following People) per twitter user id Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_twitter_friends"></A>
<P CLASS="TYPE_TITLE">
get_twitter_friends
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_twitter.html#get_twitter_friends">get_twitter_friends</A>(i_twitter_id IN usr.twitter_id%TYPE)
  RETURN CLOB

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Get all Twitter friend IDs(People you follow) per twitter user id Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="ins_twitter_friends"></A>
<P CLASS="TYPE_TITLE">
ins_twitter_friends
</P>
<PRE CLASS="DECL_TEXT">
PROCEDURE <A HREF="api_twitter.html#ins_twitter_friends">ins_twitter_friends</A>(i_id_usr IN usr.id_usr%TYPE)

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Get all Twitter friend IDs(People you follow) per id_usr from usr table<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + insert all ids found in table usr_tw_friends<br>
Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_twitter_id"></A>
<P CLASS="TYPE_TITLE">
get_twitter_id
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_usr.body.html#get_twitter_id">get_twitter_id</A>(i_twitter_name IN usr.twitter_name%TYPE)
  RETURN usr.twitter_id%TYPE

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Find the Twitter User ID for an twitter name Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_twitter_name"></A>
<P CLASS="TYPE_TITLE">
get_twitter_name
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_usr.body.html#get_twitter_name">get_twitter_name</A>(i_twitter_id IN usr.twitter_id%TYPE)
  RETURN usr.twitter_name%TYPE

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Find the Twitter User name for an twitter ID Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_twitter_profile_pic_url"></A>
<P CLASS="TYPE_TITLE">
get_twitter_profile_pic_url
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_usr.body.html#get_twitter_profile_pic_url">get_twitter_profile_pic_url</A>(i_twitter_id IN usr.twitter_id%TYPE,
                                     i_ssl        IN NUMBER := 1)
  RETURN usr.twitter_profile_pic_url%TYPE

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Find the Twitter Profile Pic URL for an twitter ID Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<HR>
<A NAME="get_search_results"></A>
<P CLASS="TYPE_TITLE">
get_search_results
</P>
<PRE CLASS="DECL_TEXT">
FUNCTION <A HREF="api_twitter.html#get_search_results">get_search_results</A>(i_search_string IN VARCHAR2,
                            i_count         IN NUMBER := 20) RETURN CLOB

</PRE>
<P CLASS="DESC_TEXT">
Purpose:&nbsp; Get all Tweets as search result with specified search string Author:&nbsp;&nbsp; Daniel Hochleitner Created:&nbsp; 16.08.2015 Changed:<br>

<BR>
</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</BODY>
</HTML>
